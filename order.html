<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Order | Reload 4 Kidz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .order-container {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .order-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .order-header h1 {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .selected-product {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            margin-top: 15px;
            font-weight: 600;
        }

        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        .order-form {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .combo-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .combo-title {
            font-weight: 700;
            margin-bottom: 20px;
            color: #667eea;
            text-align: center;
            font-size: 1.2rem;
        }

        .combo-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .combo-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .combo-option input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .combo-option label {
            flex: 1;
            cursor: pointer;
            font-weight: 500;
            font-size: 1rem;
        }

        .combo-price {
            font-weight: 700;
            color: #ff6b6b;
            font-size: 1.1rem;
        }

        .order-summary {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid #667eea;
        }

        .summary-title {
            font-weight: 700;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .summary-row.total {
            border-top: 2px solid #667eea;
            padding-top: 15px;
            margin-top: 15px;
            font-weight: 700;
            font-size: 1.3rem;
            color: #667eea;
        }

        .discount-row {
            color: #28a745;
            font-weight: 600;
        }

        .submit-order-btn {
            width: 100%;
            background: linear-gradient(45deg, #25d366, #20c997);
            color: white;
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-order-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(37, 211, 102, 0.4);
        }

        .trust-indicators {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
        }

        .trust-indicators p {
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .order-container {
                margin: 10px;
                max-height: 95vh;
                overflow-y: auto;
            }
            
            .order-header,
            .order-form {
                padding: 25px;
            }

            .order-header h1 {
                font-size: 2rem;
            }

            .back-link {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 15px;
                display: inline-flex;
            }
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '2738861049636938');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=2738861049636938&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
</head>
<body>
    <div class="order-container">
        <div class="order-header">
            <a href="javascript:history.back()" class="back-link">
                <i class="fas fa-arrow-left"></i> Back
            </a>
            <h1>Complete Your Order</h1>
            <div id="selectedProduct" class="selected-product"></div>
        </div>
        
        <form id="orderForm" class="order-form">
            <div class="form-group">
                <label for="customerName">Full Name *</label>
                <input type="text" id="customerName" name="customerName" required>
            </div>
            
            <div class="form-group">
                <label for="customerPhone">Phone Number *</label>
                <input type="tel" id="customerPhone" name="customerPhone" required>
            </div>
            
            <div class="form-group">
                <label for="customerEmail">Email Address</label>
                <input type="email" id="customerEmail" name="customerEmail" placeholder="Optional">
            </div>
            
            <div class="form-group">
                <label for="deliveryAddress">Delivery Address *</label>
                <textarea id="deliveryAddress" name="deliveryAddress" rows="3" required placeholder="Enter your full delivery address including landmarks"></textarea>
            </div>
            
            <div class="form-group">
                <label for="childAge">Child's Age</label>
                <select id="childAge" name="childAge">
                    <option value="">Select age range</option>
                    <option value="2-3 years">2-3 years</option>
                    <option value="4-6 years">4-6 years</option>
                    <option value="7-9 years">7-9 years</option>
                    <option value="10-12 years">10-12 years</option>
                    <option value="Multiple children">Multiple children</option>
                </select>
            </div>
            
            <div class="combo-section">
                <div class="combo-title">üéÅ SPECIAL COMBO DISCOUNTS</div>
                
                <div class="combo-option" onclick="toggleComboOption(this)">
                    <input type="checkbox" id="combo-syrup" name="combo" value="syrup" data-price="200" data-name="Reload 4 Kidz Premium Syrup">
                    <label for="combo-syrup">Reload 4 Kidz Premium Syrup</label>
                    <span class="combo-price">‚Çµ200</span>
                </div>
                
                <div class="combo-option" onclick="toggleComboOption(this)">
                    <input type="checkbox" id="combo-tablets" name="combo" value="tablets" data-price="250" data-name="Reload 4 Kidz Chewable Tablets">
                    <label for="combo-tablets">Reload 4 Kidz Chewable Tablets</label>
                    <span class="combo-price">‚Çµ250</span>
                </div>
                
                <div class="combo-option" onclick="toggleComboOption(this)">
                    <input type="checkbox" id="combo-tonic" name="combo" value="tonic" data-price="160" data-name="Reload Tonic">
                    <label for="combo-tonic">Reload Tonic</label>
                    <span class="combo-price">‚Çµ160</span>
                </div>
            </div>
            
            <div class="form-group">
                <label for="specialInstructions">Special Instructions</label>
                <textarea id="specialInstructions" name="specialInstructions" rows="2" placeholder="Any special delivery instructions or health concerns?"></textarea>
            </div>
            
            <div class="order-summary">
                <div class="summary-title">üìã Order Summary</div>
                <div class="summary-row">
                    <span>Products:</span>
                    <span id="summaryProducts">No products selected</span>
                </div>
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="summarySubtotal">‚Çµ0</span>
                </div>
                <div class="summary-row discount-row" id="comboDiscountRow" style="display: none;">
                    <span>Combo Discount:</span>
                    <span id="summaryDiscount">-‚Çµ0</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="summaryTotal">‚Çµ0</span>
                </div>
            </div>
            
            <div class="loading" id="loadingSpinner">
                <div class="spinner"></div>
                <p>Processing your order...</p>
            </div>
            
            <button type="submit" class="submit-order-btn" id="submitBtn">
                <i class="fab fa-whatsapp"></i>
                COMPLETE ORDER VIA WHATSAPP
            </button>
            
            <div class="trust-indicators">
                <p><i class="fas fa-lock"></i> Secure Processing | <i class="fas fa-truck"></i> Fast Delivery | <i class="fas fa-star"></i> 100% Satisfaction Guaranteed</p>
            </div>
        </form>
    </div>

    <script>
        // Product prices
        const productPrices = {
            'Reload 4 Kidz Premium Syrup': 200,
            'Reload 4 Kidz Chewable Tablets': 250,
            'Reload Tonic': 160
        };

        // Global variables for order form
        let selectedProducts = {};

        // Get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Initialize page with URL parameters
        function initializePage() {
            const product = getUrlParameter('product');
            const price = getUrlParameter('price');
            
            if (product && price) {
                document.getElementById('selectedProduct').innerHTML = `
                    <strong>${product}</strong> - ‚Çµ${price}
                `;
                
                // Handle special bundle case
                if (product === 'Complete Bundle') {
                    // Select all products for complete bundle
                    document.querySelectorAll('.combo-option input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = true;
                        const productName = checkbox.getAttribute('data-name');
                        selectedProducts[productName] = productPrices[productName];
                        checkbox.parentElement.style.borderColor = '#667eea';
                        checkbox.parentElement.style.backgroundColor = '#f0f4ff';
                    });
                } else {
                    // Select single product
                    const checkbox = document.querySelector(`.combo-option input[data-name="${product}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        selectedProducts[product] = productPrices[product];
                        checkbox.parentElement.style.borderColor = '#667eea';
                        checkbox.parentElement.style.backgroundColor = '#f0f4ff';
                    }
                }
                
                updateOrderSummary();
            } else {
                // Default display
                document.getElementById('selectedProduct').innerHTML = `
                    <strong>Select Products Below</strong>
                `;
            }
        }

        function toggleComboOption(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const productName = checkbox.getAttribute('data-name');
            const productPrice = parseFloat(checkbox.getAttribute('data-price'));
            
            if (checkbox.checked) {
                checkbox.checked = false;
                delete selectedProducts[productName];
                element.style.borderColor = '#eee';
                element.style.backgroundColor = '';
            } else {
                checkbox.checked = true;
                selectedProducts[productName] = productPrice;
                element.style.borderColor = '#667eea';
                element.style.backgroundColor = '#f0f4ff';
            }
            
            updateOrderSummary();
        }

        function updateOrderSummary() {
            let subtotal = 0;
            let productNames = [];
            
            // Calculate subtotal and get product names
            for (const [name, price] of Object.entries(selectedProducts)) {
                subtotal += price;
                productNames.push(name);
            }
            
            // Calculate discount based on number of products
            let discount = 0;
            const productCount = Object.keys(selectedProducts).length;
            
            if (productCount === 2) {
                discount = 20;
            } else if (productCount === 3) {
                discount = 30;
            }
            
            const total = subtotal - discount;
            
            // Update summary display
            document.getElementById('summaryProducts').textContent = productNames.length > 0 ? productNames.join(', ') : 'No products selected';
            document.getElementById('summarySubtotal').textContent = `‚Çµ${subtotal}`;
            
            if (discount > 0) {
                document.getElementById('comboDiscountRow').style.display = 'flex';
                document.getElementById('summaryDiscount').textContent = `-‚Çµ${discount}`;
            } else {
                document.getElementById('comboDiscountRow').style.display = 'none';
            }
            
            document.getElementById('summaryTotal').textContent = `‚Çµ${total}`;
        }

        // Handle form submission
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check if at least one product is selected
            if (Object.keys(selectedProducts).length === 0) {
                alert('Please select at least one product before placing your order.');
                return;
            }
            
            // Show loading spinner
            document.getElementById('loadingSpinner').classList.add('show');
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('submitBtn').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            
            setTimeout(() => {
                const formData = new FormData(this);
                
                // Calculate order details
                let subtotal = 0;
                const productNames = [];
                
                for (const [name, price] of Object.entries(selectedProducts)) {
                    subtotal += price;
                    productNames.push(name);
                }
                
                // Calculate discount
                const productCount = Object.keys(selectedProducts).length;
                let discount = 0;
                
                if (productCount === 2) {
                    discount = 20;
                } else if (productCount === 3) {
                    discount = 30;
                }
                
                const total = subtotal - discount;
                
                // Create WhatsApp message
                let message = `üõí NEW ORDER REQUEST\n\n`;
                message += `üë§ Customer Details:\n`;
                message += `Name: ${formData.get('customerName')}\n`;
                message += `Phone: ${formData.get('customerPhone')}\n`;
                if (formData.get('customerEmail')) {
                    message += `Email: ${formData.get('customerEmail')}\n`;
                }
                message += `\nüì¶ Order Details:\n`;
                message += `Products: ${productNames.join(', ')}\n`;
                message += `Subtotal: ‚Çµ${subtotal}\n`;
                if (discount > 0) {
                    message += `Combo Discount: -‚Çµ${discount}\n`;
                }
                message += `Total Amount: ‚Çµ${total}\n`;
                message += `\nüöö Delivery Details:\n`;
                message += `Address: ${formData.get('deliveryAddress')}\n`;
                if (formData.get('childAge')) {
                    message += `Child's Age: ${formData.get('childAge')}\n`;
                }
                if (formData.get('specialInstructions')) {
                    message += `\nüìù Special Instructions:\n${formData.get('specialInstructions')}\n`;
                }
                message += `\n‚úÖ Please confirm this order and delivery timeline.`;
                
                // Encode message for WhatsApp URL
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/+233591410341?text=${encodedMessage}`;
                
                // Open WhatsApp
                window.open(whatsappUrl, '_blank');
                
                // Reset form and loading state
                document.getElementById('loadingSpinner').classList.remove('show');
                document.getElementById('submitBtn').disabled = false;
                document.getElementById('submitBtn').innerHTML = '<i class="fab fa-whatsapp"></i> COMPLETE ORDER VIA WHATSAPP';
                
                // Show success message
                alert('Order processed! WhatsApp will open to complete your order. If it doesn\'t open automatically, please call +233 59 141 0341');
                
            }, 1500); // Simulate processing time
        });

        // Initialize page on load
        document.addEventListener('DOMContentLoaded', initializePage);

        // Add smooth animations
        document.addEventListener('DOMContentLoaded', function() {
            const formGroups = document.querySelectorAll('.form-group, .combo-section, .order-summary');
            formGroups.forEach((group, index) => {
                group.style.opacity = '0';
                group.style.transform = 'translateY(20px)';
                group.style.transition = 'all 0.4s ease';
                
                setTimeout(() => {
                    group.style.opacity = '1';
                    group.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
